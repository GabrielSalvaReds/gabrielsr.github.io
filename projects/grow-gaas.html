<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Grow Ga-as â€” Play (Embedded)</title>
  <style>
    :root{
      --bg:#0b0b0b; --panel:#0f1720; --accent:#7bd389; --muted:#9da6ad; --pixel:#e6f7ee;
    }
    html,body{height:100%;margin:0;background:linear-gradient(180deg,#070707,#0b0b0b);font-family:monospace;color:var(--pixel)}
    .wrap{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px}
    .game-shell{width:min(720px,94vw);background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.04);border-radius:12px;box-shadow:0 12px 40px rgba(0,0,0,0.6);overflow:hidden}
    .header{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;border-bottom:1px solid rgba(255,255,255,0.02);background:rgba(255,255,255,0.01)}
    .header .title{font-weight:700}
    .header .score{color:var(--muted)}
    .board-wrap{display:flex;justify-content:center;padding:18px;background:linear-gradient(180deg, rgba(10,10,10,0.2), rgba(6,6,6,0.35))}
    canvas{background:#010101;border-radius:6px;image-rendering:pixelated}
    .controls{display:flex;gap:8px;align-items:center;padding:12px 16px;border-top:1px solid rgba(255,255,255,0.02);background:rgba(255,255,255,0.006)}
    .btn{background:transparent;border:1px solid rgba(255,255,255,0.04);padding:8px 10px;border-radius:8px;color:var(--pixel);cursor:pointer}
    .muted{color:var(--muted);font-size:13px}
    .overlay{
      position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg, rgba(0,0,0,0.6), rgba(0,0,0,0.7));z-index:9999;padding:20px;
    }
    .modal{
      width:min(820px,96%);max-width:1000px;background:var(--panel);border-radius:14px;padding:18px;border:1px solid rgba(255,255,255,0.03);
      box-shadow:0 30px 80px rgba(0,0,0,0.6);
    }
    .game-over{
      display:flex;flex-direction:column;gap:12px;align-items:center;justify-content:center;padding:18px;text-align:center;
    }
    .big{font-size:22px;font-weight:700}
    .small{font-size:14px;color:var(--muted)}
    
    @media (max-width:520px){ .game-shell{width:100%} canvas{width:92vw;height:92vw} .header{flex-direction:column;gap:8px} }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="game-shell" role="application" aria-label="Grow Ga-as snake game">
      <div class="header">
        <div class="title">Grow Ga-as</div>
        <div class="score">Score: <span id="score">0</span></div>
      </div>

      <div class="board-wrap">
        <canvas id="gameCanvas" width="480" height="480" style="width:480px;height:480px;"></canvas>
      </div>

      <div class="controls">
        <button id="btnRestart" class="btn">Restart (R)</button>
        <button id="btnPause" class="btn">Pause (P)</button>
        <div style="flex:1" class="muted">Use Arrow keys or WASD to move. Eat the green food to grow. Collide with walls or self to end.</div>
      </div>
    </div>
  </div>


  <div id="gameOverOverlay" class="overlay" style="display:none;">
    <div class="modal">
      <div class="game-over" role="dialog" aria-modal="true">
        <div class="big">Game Over</div>
        <div class="small">Final score: <span id="finalScore">0</span></div>
        <div style="display:flex;gap:10px;margin-top:8px">
          <button id="restartFromOverlay" class="btn">Play again</button>
          <button id="closeModal" class="btn">Close</button>
        </div>
      </div>
    </div>
  </div>

<script>


(function(){
  const canvas = document.getElementById('gameCanvas');
  const ctx = canvas.getContext('2d');


  const GRID = 16;              
  const CELLS = 30;             
  const CANVAS_SIZE = GRID * CELLS;


  canvas.width = CANVAS_SIZE;
  canvas.height = CANVAS_SIZE;


  ctx.imageSmoothingEnabled = false;


  let snake = [{x: Math.floor(CELLS/2), y: Math.floor(CELLS/2)}]; 
  let dir = {x:1, y:0}; 
  let nextDir = {x:1, y:0};
  let food = {};
  let score = 0;
  let speed = 8; 
  let running = true;
  let tickTimer = 0;
  let lastTime = 0;

  
  const scoreEl = document.getElementById('score');
  const btnRestart = document.getElementById('btnRestart');
  const btnPause = document.getElementById('btnPause');
  const overlay = document.getElementById('gameOverOverlay');
  const finalScoreEl = document.getElementById('finalScore');
  const restartFromOverlay = document.getElementById('restartFromOverlay');
  const closeModal = document.getElementById('closeModal');

  
  function randCell(){ return { x: Math.floor(Math.random()*CELLS), y: Math.floor(Math.random()*CELLS) }; }

  function placeFood(){
    let pos;
    while(true){
      pos = randCell();
      
      let collision = snake.some(s => s.x === pos.x && s.y === pos.y);
      if(!collision) break;
    }
    food = pos;
  }

  function resetGame(){
    snake = [{x: Math.floor(CELLS/2), y: Math.floor(CELLS/2)}];
    dir = {x:1,y:0};
    nextDir = {x:1,y:0};
    score = 0;
    speed = 8;
    running = true;
    scoreEl.textContent = score;
    placeFood();
    overlay.style.display = 'none';
  }

  
  function drawBackground(){
    ctx.fillStyle = '#050505';
    ctx.fillRect(0,0,CANVAS_SIZE, CANVAS_SIZE);
    
    ctx.strokeStyle = 'rgba(255,255,255,0.02)';
    ctx.lineWidth = 1;
    for(let i=0;i<=CELLS;i++){
      
      ctx.beginPath();
      ctx.moveTo(i*GRID + 0.5, 0);
      ctx.lineTo(i*GRID + 0.5, CANVAS_SIZE);
      ctx.stroke();
      
      ctx.beginPath();
      ctx.moveTo(0, i*GRID + 0.5);
      ctx.lineTo(CANVAS_SIZE, i*GRID + 0.5);
      ctx.stroke();
    }
  }

  function drawCell(x,y,color,stroke){
    ctx.fillStyle = color;
    ctx.fillRect(x*GRID + 1, y*GRID + 1, GRID-2, GRID-2);
    if(stroke){
      ctx.strokeStyle = stroke;
      ctx.strokeRect(x*GRID + 1, y*GRID + 1, GRID-2, GRID-2);
    }
  }

  function update(dt){
    if(!running) return;
    tickTimer += dt;
    const tickInterval = 1 / speed;
    while(tickTimer > tickInterval){
      tick();
      tickTimer -= tickInterval;
    }
  }

  function tick(){
    
    dir = nextDir;

    
    const head = { x: (snake[0].x + dir.x), y: (snake[0].y + dir.y) };

    
    if(head.x < 0 || head.y < 0 || head.x >= CELLS || head.y >= CELLS){
      gameOver();
      return;
    }

    
    if(snake.some(seg => seg.x === head.x && seg.y === head.y)){
      gameOver();
      return;
    }

    
    snake.unshift(head);

    
    if(head.x === food.x && head.y === food.y){
      score += 1;
      scoreEl.textContent = score;
      
      if(score % 4 === 0 && speed < 18) speed += 1;
      placeFood();
    } else {
      
      snake.pop();
    }
  }

  function render(){
    
    drawBackground();

    
    drawCell(food.x, food.y, '#6fe58a', 'rgba(0,0,0,0.15)');

    
    
    if(snake.length){
      const head = snake[0];
      drawCell(head.x, head.y, '#9ef2b8', '#2b6a3a');
    }
    
    for(let i=1;i<snake.length;i++){
      const seg = snake[i];
      drawCell(seg.x, seg.y, '#5fe08a');
    }
  }

  function frame(now){
    if(!lastTime) lastTime = now;
    const dt = (now - lastTime) / 1000;
    lastTime = now;
    update(dt);
    render();
    requestAnimationFrame(frame);
  }

  
  window.addEventListener('keydown', (e) => {
    if(!running && e.key === 'r') { resetGame(); return; }
    const k = e.key;
    if(k === 'ArrowUp' || k === 'w' || k === 'W') {
      if(dir.y === 1) return; 
      nextDir = {x:0,y:-1};
    } else if(k === 'ArrowDown' || k === 's' || k === 'S') {
      if(dir.y === -1) return;
      nextDir = {x:0,y:1};
    } else if(k === 'ArrowLeft' || k === 'a' || k === 'A') {
      if(dir.x === 1) return;
      nextDir = {x:-1,y:0};
    } else if(k === 'ArrowRight' || k === 'd' || k === 'D') {
      if(dir.x === -1) return;
      nextDir = {x:1,y:0};
    } else if(k === 'p' || k === 'P') {
      running = !running;
      btnPause.textContent = running ? 'Pause (P)' : 'Resume (P)';
    } else if(k === 'r' || k === 'R') {
      resetGame();
    }
  });

  
  btnRestart.addEventListener('click', () => resetGame());
  btnPause.addEventListener('click', () => { running = !running; btnPause.textContent = running ? 'Pause (P)' : 'Resume (P)'; });

  
  function gameOver(){
    running = false;
    finalScoreEl.textContent = score;
    overlay.style.display = 'flex';
    
    overlay.focus?.();
  }

  restartFromOverlay.addEventListener('click', () => { resetGame(); });
  closeModal.addEventListener('click', () => {
    

    overlay.style.display = 'none';
  });

  
  resetGame();
  requestAnimationFrame(frame);

})();
</script>
</body>
</html>
